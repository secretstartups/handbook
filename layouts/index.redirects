# See docs for redirects in GitLab Pages:
#   https://docs.gitlab.com/ee/user/project/pages/redirects.html
#
# This file is automatically generated from a template:
#   layouts/index.redirects
#
# Please add in chronological order by removal date following https://handbook.gitlab.com/docs/development/#redirects.

{{ $aliases := newScratch -}}
{{ $section_aliases := newScratch -}}
{{ $root_sections := slice -}}
{{/* handle explicit aliases in frontmatter */}}
{{- range $p := .Site.Pages -}}
{{- $aliases.Add $p.RelPermalink $p.Aliases -}}
{{- end -}}
{{- range .Site.Sections -}}
{{- $root_sections = $root_sections | append .RelPermalink -}}
{{- end -}}
{{/* custom aliases for handbook sections */}}
{{- with site.GetPage "handbook" -}}
{{- range .Sections -}}
{{- if not (in $root_sections (replace .RelPermalink "/handbook" "")) -}}
{{- $section_aliases.Add (printf "%s:splat" .RelPermalink) (replace .RelPermalink "/handbook" "" 1 | printf "%s*" | slice) -}}
{{- end -}}
{{- end -}}
{{- end -}}
{{ printf "\n# Aliases Generated from Front Matter" }}
{{ printf "" }}
{{- range $permalink, $redirects := $aliases.Values -}}
{{- range $r := $redirects -}}
{{- printf "%s %s\n" $r $permalink -}}
{{- end -}}
{{- end -}}
{{ printf "\n# Root level section aliases\n" }}
{{- range $permalink, $redirects := $section_aliases.Values -}}
{{- range $r := $redirects -}}
{{- printf "%s %s\n" $r $permalink -}}
{{- end -}}
{{- end -}}
{{ printf "" }}

# Handbook doesn't use .html style page locations so repoint these
/*.html /:splat/ 301

# Moved pages - remove 2024-11-20
/handbook/business-technology/data-team/ /handbook/enterprise-data/ 301
/handbook/business-technology/data-team/* /handbook/enterprise-data/:splat 301
/handbook/business-technology/end-user-services/ /handbook/it/end-user-services/ 301
/handbook/business-technology/end-user-services/* /handbook/it/end-user-services/:splat 301
/handbook/business-technology/enterprise-applications/quote-to-cash/ /handbook/business-technology/enterprise-applications/entapps-crm/quote-to-cash/ 301
/handbook/business-technology/enterprise-applications/quote-to-cash/* /handbook/business-technology/enterprise-applications/entapps-crm/quote-to-cash/:splat 301
/handbook/business-technology/enterprise-applications/tools/ /handbook/business-technology/tools/ 301
/handbook/business-technology/enterprise-applications/tools/* /handbook/business-technology/tools/:splat 301
/handbook/business-technology/gitlab-business-continuity-plan/ /handbook/business-technology/entapps-documentation/policies/gitlab-business-continuity-plan/ 301
/handbook/business-technology/it-compliance/ /handbook/business-technology/enterprise-applications/it-compliance/ 301
/handbook/business-technology/it-compliance/* /handbook/business-technology/enterprise-applications/it-compliance/:splat 301
/handbook/business-technology/okta/ /handbook/it/okta/ 301
/handbook/business-technology/okta/* /handbook/it/okta/:splat 301
/handbook/business-technology/pmo/ /handbook/business-technology/enterprise-applications/pmo/ 301
/handbook/business-technology/pmo/* /handbook/business-technology/enterprise-applications/pmo/:splat 301

# Files with Underscores in their Name - remove 2024-12-01
/handbook/security/External_Security_Communications_Procedure.html /handbook/security/external-security-communications-procedure/ 301
/handbook/security/gitlab_projects_baseline_requirements.html /handbook/security/gitlab_projects_baseline_requirements/ 301
/handbook/security/gitlab_security_resource_center.html /handbook/security/gitlab_security_resource_center/ 301
/handbook/security/security-assurance/field-security/answerbase_quality_guide.html /handbook/security/security-assurance/field-security/answerbase_quality_guide/ 301
/handbook/security/security-assurance/field-security/field_security_observation_and_ofi_quality_guide.html /handbook/security/security-assurance/field-security/field_security_observation_and_ofi_quality_guide/ 301
/handbook/security/security-assurance/field-security/independent_security_assurance.html /handbook/security/security-assurance/field-security/independent_security_assurance/ 301
/handbook/security/security-assurance/governance_and_field_security_team_charter.html /handbook/security/security-assurance/governance_and_field_security_team_charter/ 301
/handbook/security/security-assurance/production_readiness_compliance_assessment.html /handbook/security/security-assurance/production-readiness-compliance-assessment/ 301
/handbook/security/security-assurance/security-risk/sox_cuec_mapping_procedure.html /handbook/security/security-assurance/security-risk/sox_cuec_mapping_procedure/ 301
/handbook/legal/privacy/us-state-privacy-disclosure/ https://about.gitlab.com/privacy/us-state-privacy-rights-and-disclosures/ 301

# Old redirect pre-migration - remove 2024-12-01
/handbook/finance/accounting/prepaid/ https://internal.gitlab.com/handbook/finance/accounting/prepaid/ 301
/handbook/finance/accounting/finance-ops/accounts-receivable/ https://internal.gitlab.com/handbook/finance/accounting/finance-ops/accounts-receivable/ 301
/handbook/finance/accounting/finance-ops/billing-ops/zuora-billing/ https://internal.gitlab.com/handbook/finance/accounting/finance-ops/billing-ops/zuora-billing/ 301
/handbook/finance/accounting/finance-ops/revenue-accounting/ https://internal.gitlab.com/handbook/finance/accounting/finance-ops/revenue-accounting/ 301
/handbook/finance/accounting/finance-ops/revenue-accounting/tech-stack-guide-zuora-revenue/ https://internal.gitlab.com/handbook/finance/accounting/finance-ops/revenue-accounting/tech-stack-guide-zuora-revenue/ 301
/handbook/finance/financial-planning-and-analysis/marketing-finance/ https://internal.gitlab.com/handbook/finance/financial-planning-and-analysis/marketing-finance/ 301
/handbook/finance/financial-planning-and-analysis/sales-finance/ https://internal.gitlab.com/handbook/finance/finance-planning-and-analysis/sales-finance/ 301
/handbook/finance/timekeeping/frequently-asked-questions/ https://internal.gitlab.com/handbook/finance/payroll/timekeeping/frequently-asked-questions/ 301

# Moved out of top-level - remove 2024-12-01
/handbook/editing-handbook/ /handbook/about/editing-handbook/ 301
/handbook/editing-handbook/* /handbook/about/editing-handbook/:splat 301
/handbook/infrastructure-standards/ /handbook/company/infrastructure-standards/ 301
/handbook/infrastructure-standards/* /handbook/company/infrastructure-standards/:splat 301
/handbook/internal-audit/ /handbook/finance/internal-audit/ 301
/handbook/internal-audit/* /handbook/finance/internal-audit/:splat 301
/handbook/tax/ /handbook/finance/tax/ 301
/handbook/travel/ /handbook/finance/travel/ 301
/handbook/travel/* /handbook/finance/travel/:splat 301

# Growth section move from Marketing to Engineering - remove 2024-12-01
/handbook/marketing/growth/engineering/* /handbook/engineering/development/growth/:splat 301

# Moved frontmatter page - remove 2024-12-01
/handbook/editing-handbook/frontmatter/ https://handbook.gitlab.com/docs/frontmatter/

# Added Digital Experience engineering subfolder - remove 2024-12-01
/handbook/marketing/digital-experience/buyer-experience-repository/ /handbook/marketing/digital-experience/engineering/buyer-experience-repository/ 301
/handbook/marketing/digital-experience/dexbot/ /handbook/marketing/digital-experience/engineering/dexbot/ 301
/handbook/marketing/digital-experience/marketing-site-rearchitecture-project/ /handbook/marketing/digital-experience/marketing-site-rearchitecture-project/ 301
/handbook/marketing/digital-experience/engineering-marketo/ /handbook/marketing/digital-experience/engineering/engineering-marketo/ 301
/handbook/marketing/digital-experience/engineering-ab-tests/ /handbook/marketing/digital-experience/engineering/engineering-marketo/ 301
/handbook/marketing/digital-experience/accessibility/ /handbook/marketing/digital-experience/engineering/accessibility/ 301
/handbook/marketing/digital-experience/engineering-gitlab-product/ /handbook/marketing/digital-experience/engineering/engineering-gitlab-product/ 301
/handbook/marketing/digital-experience/image-guidelines/ /handbook/marketing/digital-experience/engineering/image-guidelines/ 301
/handbook/marketing/digital-experience/marketing-site-approval-process/ /handbook/marketing/digital-experience/marketing-site-approval-process/ 301
/handbook/marketing/digital-experience/localization/ handbook/marketing/digital-experience/engineering/localization/ 301
/handbook/marketing/digital-experience/navigation-repository/ /handbook/marketing/digital-experience/engineering/navigation-repository/ 301
/handbook/marketing/digital-experience/data-dictionary/ /handbook/marketing/digital-experience/engineering/data-dictionary/ 301
/handbook/marketing/digital-experience/incident-response-playbook/ /handbook/marketing/digital-experience/engineering/incident-response-playbook/ 301
/handbook/marketing/digital-experience/major-league-hacking-fellows/ /handbook/marketing/digital-experience/engineeringmajor-league-hacking-fellows/ 301
/handbook/marketing/digital-experience/onetrust-cookie-consent/ /handbook/marketing/digital-experience/engineering/onetrust-cookie-consent/ 301

# Product handbook restructure - remove 2024-12-08
/handbook/product/fulfillment-guide/* /handbook/product/groups/fulfillment-guide/:splat 301
/handbook/product/project-management/* /handbook/product/groups/project-management/:splat 301
/handbook/product/product-analysis/* /handbook/product/groups/product-analysis/:splat 301
/handbook/product/categories/verify/* /handbook/product/groups/verify/:splat 301
/handbook/product/how-to-engage/* /handbook/product/product-management/#how-to-engage-product-managers 301
/handbook/product/product-okrs/* /handbook/product/product-processes/product-okrs/:splat 301
/handbook/product/single-application/* /handbook/product/groups/categories/gitlab-the-product/single-application/:splat 301
/handbook/product/product-manager-role/* /handbook/product/product-management/:splat 301
/handbook/product/gitlab-the-product /handbook/product/categories/gitlab-the-product/ 301
/handbook/product/growth/ /handbook/product/groups/growth/ 301
/handbook/product/categories/analytics/ /handbook/product/groups/analytics/ 301
/handbook/product/cpo-shadow-program/ /handbook/product/product-leaders/cpo-shadow-program/ 301
/handbook/product/product-leadership/ /handbook/product/product-leaders/product-leadership/ 301
/handbook/product/internship/ /handbook/product/product-management/internship/ 301
/handbook/product/product-manager-role/ /handbook/product/product-management/product-manager-role/ 301
/handbook/product/analytics-instrumentation-guide/ /handbook/product/product-processes/analytics-instrumentation-guide/ 301
/handbook/product/analytics-instrumentation-guide/service-usage-data-commitment/ /handbook/product/product-processes/analytics-instrumentation-guide/service-usage-data-commitment/ 301
/handbook/product/product-processes/operating-cadences/board-deck-prep/ /handbook/product/product-processes/board-deck-prep/ 301
/handbook/product/cross-functional-prioritization/ /handbook/product/product-processes/cross-functional-prioritization/ 301
/handbook/product/making-gifs/ /handbook/product/product-processes/making-gifs/ 301
/handbook/product/milestones/ /handbook/product/product-processes/milestones/ 301
/handbook/product/product-safe-guidance/ /handbook/product/product-processes/product-safe-guidance/ 301
/handbook/product/packaging-and-pricing/tiering-guidance-for-features/ /handbook/product/product-processes/tiering-guidance-for-features/ 301
/handbook/product/features/ /handbook/product/categories/features/ 301

# Remote Development group/category renames - remove 2024-12-17
/handbook/engineering/architecture/design-documents/remote_development/* /handbook/engineering/architecture/design-documents/workspaces/:splat 301

# Removed oudated customer advocacy pages - remove 2024-12-17
/handbook/marketing/brand-and-product-marketing/product-and-solution-marketing/customer-advocacy/* /handbook/marketing/brand-and-product-marketing/product-and-solution-marketing/customer-advocacy/ 301

# Replace Engagement Concierge with Team Workshops - remove 2024-12-26
/handbook/people-group/engagement-concierge/ /handbook/people-group/learning-and-development/team-workshops 301

# Growth and Development Pages Moved - remove 2024-12-20
/handbook/total-rewards/benefits/general-and-entity-benefits/growth-and-development/ /handbook/people-group/learning-and-development/growth-and-development/ 301
/handbook/total-rewards/benefits/general-and-entity-benefits/growth-and-development/* /handbook/people-group/learning-and-development/growth-and-development/:splat 301

# Moved CTO Leadership Team page - remove 2024-12-30
/handbook/engineering/cto-staff/ /handbook/engineering/cto-leadership-team/ 301

# Solutions Architecture Handbook Moved - remove 2025-01-01
/handbook/customer-success/solutions-architects/* /handbook/solutions-architects/:splat 301
/handbook/customer-success/solutions-architects/ /handbook/solutions-architects/ 301

# Dogfooding for R&D Moved - remove 2025-01-14
/handbook/product/product-processes/dogfooding-for-product-mgt/ /handbook/product/product-processes/dogfooding-for-r-d/ 301

# Brand Standards - remove 2025-01-17
/handbook/marketing/brand-and-product-marketing/brand/brand-activation/brand-standards/* https://design.gitlab.com/brand-overview/resources 301

# Replace aliases - remove 2025-02-01
/handbook/esg/ /handbook/company/esg/ 301
/handbook/gdpr/ /handbook/legal/privacy/gdpr/ 301
/handbook/resellers/reseller-agreement/ /handbook/legal/reseller-agreement/ 301
/teamops/everyone-contributes/ /teamops/equal-contributions/ 301

# Webinar redirects - remove 2025-05-01
/handbook/customer-success/csm/segment/cse/webinar-calendar/ https://university.gitlab.com/pages/gitlab-user-webinars 301
/handbook/customer-success/csm/segment/scale/webinar-calendar/  https://university.gitlab.com/pages/gitlab-user-webinars 301

# about.gitlab.com handbook guide redirects - remove 2025-05-25
/handbook/product/markdown-guide/ https://about.gitlab.com/community/markdown-guide-middleman/ 301

# Dynamic analysis page moved - remove 2025-02-03
/handbook/engineering/development/sec/secure/dynamic-analysis/ /handbook/engineering/development/sec/secure/dynamic-analysis/dynamic-analysis/ 301
/handbook/engineering/development/sec/secure/api-security/ /handbook/engineering/development/sec/secure/dynamic-analysis/api-security/ 301

# Old red team handbook - remove 2025-11-11
/handbook/security/threat-management/red-team/ /handbook/security/security-operations/red-team/ 301